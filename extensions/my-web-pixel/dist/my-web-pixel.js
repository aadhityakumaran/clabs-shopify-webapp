(()=>{var m="WebPixel::Render";var p=n=>shopify.extend(m,n);p(({analytics:n,settings:h})=>{(function(t,a){t.ClAnalyticsObject=a,t[a]=t[a]||[],t[a].methods=["trackSubmit","trackClick","pageview","identify","track"],t[a].factory=function(c){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(c),t[a].push(i),t[a]}};for(var r=0;r<t[a].methods.length;r++){var e=t[a].methods[r];t[a][e]=t[a].factory(e)}})(self,"_cl"),_cl.SNIPPET_VERSION="1.0.0",_cl.SANDBOX_ENV=!0;try{importScripts("https://gist.github.com/aadhityakumaran/da27b3d6ca833fb0642fef8d2f7223d8.js")}catch(t){console.log(t)}try{importScripts("https://cdn.js.customerlabs.co/cl5788uk313b01.js")}catch(t){console.log(t)}try{importScripts("https://cdn.jsdelivr.net/npm/hello-world-js@0.0.2/src/index.min.js")}catch(t){console.log(t)}var o={debug:!1,fb_skip_contents:!1};function l(t){var a=[];if(t.length>0)for(var r=0;r<t.length;r++){var e={id:t[r].variant.product.id,sku:t[r].variant.sku,name:t[r].variant.product.title,price:t[r].variant.price.amount,imageURL:t[r].variant.image.src,brand:t[r].variant.product.vendor,quantity:t[r].quantity};a.push(e)}return a}function s(t){var a=[];for(let i=0;i<t.length;i++){var r={};for(var e in t[i])switch(e){case"name":case"title":r.product_name={t:"string",v:t[i][e]};break;case"id":r.product_id={t:"string",v:t[i].id};break;case"price":r.product_price={t:"number",v:t[i].price};break;case"category":r.product_category={t:"string",v:t[i].category};break;case"brand":r.product_brand={t:"string",v:t[i].brand};break;case"variant":r.product_variant={t:"string",v:t[i].variant};break;case"productType":r.product_type={t:"string",v:t[i].productType};break;case"coupon":r.product_coupon={t:"string",v:t[i].coupon};break;case"quantity":r.product_quantity={t:"string",v:t[i].quantity};break;default:let u=/^\d+$/.test(t[i][e]);var c="";if(Array.isArray(t[i][e]))continue;if(typeof t[i][e]=="object"&&t[i][e]!==null&&!Array.isArray(t[i][e]))continue;t[i][e]!==null&&(Number.isFinite(t[i][e])||u||!isNaN(parseFloat(t[i][e])))?c="number":c="string",e.substring(0,8)==="product_"?r[e]={t:c,v:t[i][e]}:r["product_"+e]={t:c,v:t[i][e]}}a.push(r)}return a}function f(t){var a={email:t.email,phone:t.phone,city:t.shippingAddress.city,country:t.shippingAddress.country,country_code:t.shippingAddress.countryCode,state:t.shippingAddress.province};return a}function v(t){var a={};for(var r in t)if(t[r]!=null)switch(r){case"email":a.email={t:"string",v:t[r]};break;case"phone":a.phone={t:"string",v:t[r]};break;case"city":a.city={t:"string",v:t[r]};break;case"country":a.country={t:"string",v:t[r]};break;case"country_code":a.country_code={t:"string",v:t[r]};break;case"state":a.state={t:"string",v:t[r]};break}return a}function g(t){var a=f(t.data.checkout),r=v(a),e={customProperties:{user_traits:{t:"Object",v:r}}};return r.email&&(e.customProperties.identify_by_email={t:"string",v:r.email.v,ib:!0}),r.phone&&(e.customProperties.identify_by_phone={t:"string",v:r.phone.v,ib:!0}),e}clShopifyTrack=function(){n.subscribe("product_viewed",t=>{var a={id:t.data.productVariant.product.id,sku:t.data.productVariant.sku,name:t.data.productVariant.product.title,price:t.data.productVariant.price.amount,imageURL:t.data.productVariant.image.src,brand:t.data.productVariant.product.vendor},r={currency:{t:"string",v:t.data.productVariant.price.currencyCode},url:{t:"string",v:t.context.window.location.href},content_type:{t:"string",v:"product_group"}};o.fb_skip_contents&&(r.skip_contents=!0);var e=s([a]);e[0].product_price&&(r.value=e[0].product_price);var c={customProperties:r,productProperties:e};_cl.trackClick("Product viewed",c),o.debug&&console.log("Product viewed : "+JSON.stringify(c))}),n.subscribe("collection_viewed",t=>{var a={customProperties:{url:{t:"string",v:t.context.window.location.href},category_name:{t:"string",v:t.data.collection.title},category_id:{t:"string",v:t.data.collection.id}}};_cl.pageview("Category viewed",a),o.debug&&console.log("Category viewed : "+JSON.stringify(a))}),n.subscribe("product_added_to_cart",t=>{var a={id:t.data.cartLine.merchandise.product.id,sku:t.data.cartLine.merchandise.sku,name:t.data.cartLine.merchandise.product.title,price:t.data.cartLine.merchandise.price.amount,imageURL:t.data.cartLine.merchandise.image.src,brand:t.data.cartLine.merchandise.product.vendor,quantity:t.data.cartLine.quantity},r=s([a]),e={currency:{t:"string",v:t.data.cartLine.cost.totalAmount.currencyCode},url:{t:"string",v:t.context.window.location.href},value:{t:"number",v:t.data.cartLine.cost.totalAmount.amount}};o.fb_skip_contents&&(e.skip_contents=!0);var c={customProperties:e,productProperties:r};_cl.trackClick("Added to cart",c),o.debug&&console.log("Added to cart : "+JSON.stringify(c))}),n.subscribe("search_submitted",t=>{var a={customProperties:{search_string:{t:"string",v:t.data.searchResult.query},url:{t:"string",v:t.context.window.location.href}}};_cl.pageview("Search made",a),o.debug&&console.log("Search made : "+JSON.stringify(a))}),n.subscribe("checkout_started",t=>{var a=l(t.data.checkout.lineItems),r=s(a),e={currency:{t:"string",v:t.data.checkout.totalPrice.currencyCode},value:{t:"number",v:t.data.checkout.totalPrice.amount}};o.fb_skip_contents&&(e.skip_contents=!0);var c={customProperties:e,productProperties:r};_cl.trackClick("Checkout made",c),o.debug&&console.log("Checkout made : "+JSON.stringify(c))}),n.subscribe("payment_info_submitted",t=>{var a={subtotal:{t:"number",v:t.data.checkout.subtotalPrice.amount},shipping_price:{t:"number",v:t.data.checkout.shippingLine.price.amount},tax:{t:"string",v:t.data.checkout.totalTax.amount},value:{t:"string",v:t.data.checkout.totalPrice.amount},currency:{t:"string",v:t.data.checkout.currencyCode}},r=g(t);_cl.identify(r),_cl.trackClick("AddPaymentInfo",{customProperties:a}),o.debug&&console.log("AddPaymentInfo :"+JSON.stringify({customProperties:payment_info}))}),n.subscribe("checkout_completed",t=>{var a=l(t.data.checkout.lineItems),r=s(a),e=t.data.checkout.shippingPrice||t.data.checkout.shippingLine.price,c={transaction_number:{t:"string",v:t.data.checkout.order.id},currency:{t:"string",v:(t.data.checkout.totalPrice|{}).currencyCode},subtotal:{t:"number",v:(t.data.checkout.subtotalPrice||{}).amount||0},tax:{t:"number",v:(t.data.checkout.totalTax||{}).amount||0},shipping:{t:"number",v:e&&e.amount||0},value:{t:"number",v:(t.data.checkout.totalPrice||{}).amount||0}},i={customProperties:c,productProperties:r},u=g(t);if(_cl.identify(u),c.transaction_number&&c.transaction_number.v&&window.localStorage){var _=localStorage.getItem("cl_past_purchases")||"{}",d=JSON.parse(_);d[c.transaction_number.v]||(_cl.trackClick("Purchased",i),d[c.transaction_number.v]="true",window.localStorage.setItem("cl_past_purchases",JSON.stringify(d)))}else _cl.trackClick("Purchased",i);o.debug&&console.log("Purchased :"+JSON.stringify(i))})},clShopifyTrack()});})();
